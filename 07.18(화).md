# 오늘 한 일
<pre>
일반 SQL로 작성한 쿼리를 JPQL로 바꿔서 작성하기
  JPQL로 바꿔서 작성한 후 내가 작성한 dto로 원하는 데이터만 조회하고 받아오기
</pre>
# join 없애기
<pre>
SELECT a.user_id, a.username, a.department, group_concat(b.business_name ORDER BY b.business_name ASC) AS business_name, a.role FROM user a           
  LEFT join user_to_business u on a.user_id = u.user_id 
  JOIN business b ON b.business_id = u.business_id 
  GROUP BY a.user_id, a.username, a.department,a.role;
  
SELECT a.user_id, a.username, a.department, GROUP_CONCAT(b.business_name ORDER BY b.business_name ASC) AS business_name, a.role 
  FROM user a, user_to_business u, business b 
  where a.user_id = u.user_id and b.business_id = u.business_id 
  GROUP BY a.user_id, a.username, a.department,a.role;
위의 쿼리문과 아래의 쿼리문의 결과가 동일합니다.
join을 하는 테이블들을 from뒤에 다 놔두고 where 뒤에 조건들을 and로 묶어주면 되는 것 같습니다.
  그래도 중간중간 되는지 확인을 하면서 짜면 훨씬 보기 좋고 한눈에 들어와서 이해하기도 편한 쿼리문을 작성할 수 있을 것 같습니다.
</pre>

# 일반 SQL -> JPQL
<pre>
관련링크 : https://jforj.tistory.com/90
SELECT a.user_id, a.username, a.department, group_concat(b.business_name ORDER BY b.business_name ASC) AS business_name, a.role FROM user a           
LEFT join user_to_business u on a.user_id = u.user_id 
JOIN business b ON b.business_id = u.business_id 
GROUP BY a.user_id, a.username, a.department,a.role;
이 쿼리문을 JPQL로 바꿔주려면 주의해야 할 점이 있습니다.
  일단 JPQL은 Entity클래스를 바라보고 작성을 해야합니다.
  1. 각 변수들을 table의 column이 아닌 entity클래스에서 정해준 변수명으로 바꿔야합니다.
  2. dto를 사용할 때 select new 'dto주소'(~~) from ~~ 이런 형식으로 dto의 전체 주소를 적어줘야합니다. 
</pre>
